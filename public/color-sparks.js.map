{"version":3,"sources":["node_modules/auto-reload-brunch/vendor/auto-reload.js","app/color-sparks.coffee","app/requestAnimationFrame.coffee"],"names":[],"mappings":"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","file":"public/color-sparks.js","sourcesContent":["(function() {\n  var WebSocket = window.WebSocket || window.MozWebSocket;\n  var br = window.brunch = (window.brunch || {});\n  var ar = br['auto-reload'] = (br['auto-reload'] || {});\n  if (!WebSocket || ar.disabled) return;\n\n  var cacheBuster = function(url){\n    var date = Math.round(Date.now() / 1000).toString();\n    url = url.replace(/(\\&|\\\\?)cacheBuster=\\d*/, '');\n    return url + (url.indexOf('?') >= 0 ? '&' : '?') +'cacheBuster=' + date;\n  };\n\n  var reloaders = {\n    page: function(){\n      window.location.reload(true);\n    },\n\n    stylesheet: function(){\n      [].slice\n        .call(document.querySelectorAll('link[rel=\"stylesheet\"]'))\n        .filter(function(link){\n          return (link != null && link.href != null);\n        })\n        .forEach(function(link) {\n          link.href = cacheBuster(link.href);\n        });\n\n      // hack to force page repaint\n      var el = document.body;\n      var bodyDisplay = el.style.display || 'block';\n      el.style.display = 'none';\n      el.offsetHeight;\n      el.style.display = bodyDisplay;\n    }\n  };\n  var port = ar.port || 9485;\n  var host = br.server || window.location.hostname;\n\n  var connect = function(){\n    var connection = new WebSocket('ws://' + host + ':' + port);\n    connection.onmessage = function(event){\n      if (ar.disabled) return;\n      var message = event.data;\n      var reloader = reloaders[message] || reloaders.page;\n      reloader();\n    };\n    connection.onerror = function(){\n      if (connection.readyState) connection.close();\n    };\n    connection.onclose = function(){\n      window.setTimeout(connect, 1000);\n    };\n  };\n  connect();\n})();\n","\n\n\n# Represents a property that can take any value in a range\nclass Range\n  constructor: (@from, @to) ->\n  get: ->\n    random @from, @to\n\n# Configuration constants.\n# All measurements are relative to canvas width\n\nRADIUS_DECAY = new Range(0.95, 0.99)\nMAX_INITIAL_V = 1\nINITIAL_DIAMETER = new Range(.005, .015)\nFORCE_AMPLITUDE = new Range(-0.2, 0.2)\nFORCE_PERIOD = new Range(10, 50)\nGREY_VALUE = new Range(0, 128)\nTRANSPARENCY = 0.1\nBG_RELEASE_PROBABILITY = 0.3\nBACKGROUND_COLOR = \"#000000\"\nSPARK_RELEASE_RADIUS = 0.1\nSPARK_RELEASE_POWER = 2\nDARKENING_DIAMETER = new Range(0.002, 0.01)\nDARKENING_ALPHA = 0.1\n\n\nINITIAL_SPARKS_PER_SECOND = 500\nMAX_SPARKS_PER_SECOND = 1500\nMIN_SPARKS_PER_SECOND = 100\nTARGET_FPS = 30\nSPARKS_PER_SECOND_ADJUST_RATE = 0.05\n\n\n# A canvas onto which dots are drawn\nclass ColorSparks\n  constructor: (@canvas, velocityMapUrl, @logPerformance = false) ->\n    @ctx = canvas.getContext \"2d\"\n    @velocityMap = new VelocityMap(velocityMapUrl)\n\n    @frameCount = 0\n    @framesPerSecond = 60\n    @sparksPerSecond = INITIAL_SPARKS_PER_SECOND\n\n    @canvas.addEventListener \"mousedown\", @updateSparkPosition\n    @canvas.addEventListener \"mousemove\", @updateSparkPosition\n    @canvas.addEventListener \"touchstart\", @updateSparkPosition\n    @canvas.addEventListener \"touchmove\", @updateSparkPosition\n\n    @reset()\n\n    window.requestAnimationFrame @draw\n\n  # wipe the canvas and reset the animation state\n  reset: ->\n    @canvas.height = @height = @canvas.offsetHeight\n    @canvas.width = @width = @canvas.offsetWidth\n    @ctx.beginPath()\n    @ctx.rect 0, 0, @canvas.width, @canvas.height\n    @ctx.closePath()\n    @ctx.fillStyle = BACKGROUND_COLOR\n    @ctx.fill()\n    @releaseX = @width/2\n    @releaseY = @height/2\n    @sparks = []\n    return\n\n  # main rendering function executed every frame\n  draw: (timestamp) =>\n    unless @height == @canvas.offsetHeight and @width == @canvas.offsetWidth\n      @reset()\n\n    if @velocityMap.loaded\n\n      # calculate frames per second, averaging over 10 frames for consistency\n      @frameCount += 1\n      if @frameCount % 10 == 1\n        @framesPerSecond = Math.round(10 / (timestamp - @prevTimestamp) * 1000) || 60 # assume 60 fps on first frame\n        @prevTimestamp = timestamp\n\n      # adjust spark release rate up or down to hit target fps\n      if @framesPerSecond < TARGET_FPS and @sparksPerSecond > MIN_SPARKS_PER_SECOND\n        @sparksPerSecond -= (@sparksPerSecond * SPARKS_PER_SECOND_ADJUST_RATE)\n      else if @framesPerSecond > TARGET_FPS and @sparksPerSecond < MAX_SPARKS_PER_SECOND\n        @sparksPerSecond += (@sparksPerSecond * SPARKS_PER_SECOND_ADJUST_RATE)\n\n      if @logPerformance and @frameCount % 10 == 0\n        console.log \"fps=#{@framesPerSecond}, sparks=#{@sparks.length}, releaseRate=#{@sparksPerSecond.toFixed(2)}\"\n\n      sparksToRelease = @sparksPerSecond / @framesPerSecond\n      for i in [0..sparksToRelease] by 1\n        @releaseSpark(@releaseX, @releaseY)\n      @timestampLastFrame = timestamp\n\n      i = 0\n      finishedUpTo = -1\n      while i < @sparks.length\n        if @sparks[i].active\n          @sparks[i].update(@ctx)\n        else if finishedUpTo == i - 1\n            finishedUpTo = i\n        i++\n      if finishedUpTo > -1\n        @sparks.splice 0, finishedUpTo + 1\n\n    window.requestAnimationFrame @draw\n    return\n\n\n  updateSparkPosition: (event) =>\n    @releaseX = event.offsetX || event.layerX\n    @releaseY = event.offsetY || event.layerY\n    event.preventDefault()\n\n\n  releaseSpark: (centerX, centerY) ->\n    offset = Math.pow(Math.random(), SPARK_RELEASE_POWER) * SPARK_RELEASE_RADIUS * @width\n    angle = Math.random() * Math.PI * 2\n    x = centerX + Math.sin(angle) * offset\n    y = centerY + Math.cos(angle) * offset\n\n    [velocity, isForeground] = @velocityMap.dataAt(x, y, @width, @height)\n    if (!isForeground) and Math.random() > BG_RELEASE_PROBABILITY\n      return\n    spark = new Spark(\n      new Point(x, y),\n      velocity,\n      isForeground,\n      Math.max(@width, @height))\n    @sparks.push(spark)\n\n\n\n# A single dot on a ColorSparks canvas\nclass Spark\n\n  # Create a point with location and velocity Points\n  # and a color style\n  constructor: (@location, @velocity, isForeground, canvasWidth) ->\n    @initialLocation = @location.clone()\n    @forceCounter = 0\n    @active = true\n\n    @radius = INITIAL_DIAMETER.get() / 2 * canvasWidth\n    @radiusDecay = RADIUS_DECAY.get()\n    @xForceAmplitude = FORCE_AMPLITUDE.get()\n    @xForcePeriod = FORCE_PERIOD.get()\n    @yForceAmplitude = FORCE_AMPLITUDE.get()\n    @yForcePeriod = FORCE_PERIOD.get()\n\n    if isForeground\n      @color = randomColor()\n      @darkeningRadius = DARKENING_DIAMETER.get() / 2 * canvasWidth\n    else\n      @color = randomGrey()\n      @darkeningRadius = false\n\n\n  update: (ctx) =>\n    ctx.beginPath()\n    ctx.arc @location.x, @location.y, @radius, 0, Math.PI * 2, false\n    ctx.closePath()\n    ctx.fillStyle = @color\n    ctx.fill()\n    @forceCounter++\n    @velocity.x += Math.sin(Math.PI * 2 * @forceCounter / @xForcePeriod) * @xForceAmplitude\n    @velocity.y += Math.sin(Math.PI * 2 * @forceCounter / @yForcePeriod) * @yForceAmplitude\n    if @darkeningRadius\n      ctx.beginPath()\n      ctx.arc @initialLocation.x + random(-1, 1), @initialLocation.y + random(-1, 1), @darkeningRadius, 0, Math.PI * 2, false\n      ctx.closePath()\n      ctx.fillStyle = \"rgba(0, 0, 0, \" + DARKENING_ALPHA + \")\"\n      ctx.fill()\n    if @radius < 1\n      @active = false\n    @location.x += @velocity.x\n    @location.y += @velocity.y\n    @radius *= @radiusDecay\n    return\n\n\n# A class that uses a source image to control direction of movement\n# the red and green channels of the image are x and y velocity, the\n# blue channel defines whether a pixel is considered \"foreground\"\nclass VelocityMap\n  constructor: (@src) ->\n    @loaded = false\n    @image = new Image()\n    @image.onload = @handleImageLoad\n    @image.onerror = @handleImageError\n    @image.src = @src\n\n  handleImageLoad: =>\n    imgCanvas = document.createElement(\"canvas\")\n    imgCanvas.width = @imgWidth = @image.width\n    imgCanvas.height = @imgHeight = @image.height\n    imgCtx = imgCanvas.getContext(\"2d\")\n    imgCtx.drawImage @image, 0, 0\n    @imageData = imgCtx.getImageData(0, 0, imgCanvas.width, imgCanvas.height).data\n    @loaded = true\n\n  handleImageError: (event) =>\n    console.error(\"Image #{@src} failed to load\", event)\n\n  # return the data at a specific position as a 2-array of [velocity, isForeground]\n  dataAt: (x, y, canvasWidth, canvasHeight) ->\n\n    scale = @imgWidth / canvasWidth\n    yOffset = ((canvasHeight * scale) - @imgHeight) / 2\n\n    sampleX = Math.floor(x * scale)\n    sampleY = Math.floor(y * scale - yOffset)\n\n    offset = (sampleY * @imgWidth + sampleX) * 4\n\n    if sampleX < 0 or sampleX > @imgWidth or sampleY < 0 or sampleY > @imgHeight\n      return [new Point(0, 0), false]\n\n    velocity = new Point(\n      (@imageData[offset] / 128 - 1) * MAX_INITIAL_V\n      (@imageData[offset+1] / 128 - 1) * MAX_INITIAL_V)\n    isForeground = @imageData[offset+2] > 128\n    return [velocity, isForeground]\n\n\n\n# Generate a random number between from and to\nrandom = (from, to) ->\n  from + (Math.random() * (to - from))\n\n# Function to get millisecond-accurate epoch timer, more efficient in\n# browsres that support Date.now()\n\nif Date.now\n  getTimer = Date.now\nelse\n  getTimer = ->\n    new Date().getTime()\n\n# Create a random fully saturated color. Colors are fully\n# saturated if they have one RGB value at 255, one at 0, and\n# the third at some  arbitrary value.\nrandomColor = ->\n  parts = [\n    255\n    Math.floor(random(0, 255))\n    0\n  ]\n  parts[1] = \"0\" + parts[1]  if parts[1].length is 1\n  from = 0\n\n  while from < parts.length\n    to = Math.floor(random(0, parts.length))\n    tmp = parts[from]\n    parts[from] = parts[to]\n    parts[to] = tmp\n    from++\n  \"rgba(\" + parts[0] + \",\" + parts[1] + \",\" + parts[2] + \",\" + TRANSPARENCY + \")\"\n\n# Create a random fully desaturated color, i.e. one in which\n# R, G and B values are all the same\nrandomGrey = ->\n  shade = Math.floor(GREY_VALUE.get())\n  \"rgba(\" + shade + \",\" + shade + \",\" + shade + \",\" + TRANSPARENCY + \")\"\n\n\n\nclass Point\n  constructor: (@x, @y) ->\n\n  clone: -> new Point(@x, @y)\n","# http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n# http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n\n# requestAnimationFrame polyfill by Erik MÃ¶ller. fixes from Paul Irish and Tino Zijdel\n\n# MIT license\n(->\n  lastTime = 0\n  vendors = [\n    \"ms\"\n    \"moz\"\n    \"webkit\"\n    \"o\"\n  ]\n  x = 0\n\n  while x < vendors.length and not window.requestAnimationFrame\n    window.requestAnimationFrame = window[vendors[x] + \"RequestAnimationFrame\"]\n    window.cancelAnimationFrame = window[vendors[x] + \"CancelAnimationFrame\"] or window[vendors[x] + \"CancelRequestAnimationFrame\"]\n    ++x\n  unless window.requestAnimationFrame\n    window.requestAnimationFrame = (callback, element) ->\n      currTime = new Date().getTime()\n      timeToCall = Math.max(0, 16 - (currTime - lastTime))\n      id = window.setTimeout(->\n        callback currTime + timeToCall\n        return\n      , timeToCall)\n      lastTime = currTime + timeToCall\n      id\n  unless window.cancelAnimationFrame\n    window.cancelAnimationFrame = (id) ->\n      clearTimeout id\n      return\n  return\n)()\n"]}