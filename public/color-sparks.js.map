{"version":3,"sources":["node_modules/auto-reload-brunch/vendor/auto-reload.js","app/color-sparks.coffee","app/requestAnimationFrame.coffee"],"names":[],"mappings":"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","file":"public/color-sparks.js","sourcesContent":["(function() {\n  var WebSocket = window.WebSocket || window.MozWebSocket;\n  var br = window.brunch = (window.brunch || {});\n  var ar = br['auto-reload'] = (br['auto-reload'] || {});\n  if (!WebSocket || ar.disabled) return;\n\n  var cacheBuster = function(url){\n    var date = Math.round(Date.now() / 1000).toString();\n    url = url.replace(/(\\&|\\\\?)cacheBuster=\\d*/, '');\n    return url + (url.indexOf('?') >= 0 ? '&' : '?') +'cacheBuster=' + date;\n  };\n\n  var reloaders = {\n    page: function(){\n      window.location.reload(true);\n    },\n\n    stylesheet: function(){\n      [].slice\n        .call(document.querySelectorAll('link[rel=\"stylesheet\"]'))\n        .filter(function(link){\n          return (link != null && link.href != null);\n        })\n        .forEach(function(link) {\n          link.href = cacheBuster(link.href);\n        });\n\n      // hack to force page repaint\n      var el = document.body;\n      var bodyDisplay = el.style.display || 'block';\n      el.style.display = 'none';\n      el.offsetHeight;\n      el.style.display = bodyDisplay;\n    }\n  };\n  var port = ar.port || 9485;\n  var host = br.server || window.location.hostname;\n\n  var connect = function(){\n    var connection = new WebSocket('ws://' + host + ':' + port);\n    connection.onmessage = function(event){\n      if (ar.disabled) return;\n      var message = event.data;\n      var reloader = reloaders[message] || reloaders.page;\n      reloader();\n    };\n    connection.onerror = function(){\n      if (connection.readyState) connection.close();\n    };\n    connection.onclose = function(){\n      window.setTimeout(connect, 1000);\n    };\n  };\n  connect();\n})();\n","\n\n\n# Represents a property that can take any value in a range\nclass Range\n  constructor: (@from, @to) ->\n  get: ->\n    random @from, @to\n\n# Configuration constants\n\n\nRADIUS_DECAY = new Range(0.95, 0.99)\nMAX_INITIAL_V = 1\nINITIAL_DIAMETER = new Range(5, 20)\nFORCE_AMPLITUDE = new Range(-0.05, 0.05)\nFORCE_PERIOD = new Range(10, 50)\nGREY_VALUE = new Range(0, 128)\nTRANSPARENCY = 0.1\nSPARKS_PER_SECOND = 250\nSPARK_FRAMES_PER_SECOND = 10\nBG_RELEASE_PROBABILITY = 0.3\nDARKENING_DIAMETER = new Range(3, 7)\nDARKENING_BEGIN_DELAY = 5\nDARKENING_ALPHA = 0.1\nBACKGROUND_COLOR = \"#000000\"\n\n# A canvas onto which dots are drawn\nclass ColorSparks\n  constructor: (@canvas, @logPerformance = false) ->\n    @ctx = canvas.getContext \"2d\"\n    @reset()\n\n    window.requestAnimationFrame @draw\n\n    @showFrameRate = true\n    window.addEventListener \"keyup\", (event) =>\n      if event.keyCode == 70 # f key\n        @showFrameRate = !@showFrameRate\n\n    @canvas.addEventListener \"mousedown\", @startSparks\n    @canvas.addEventListener \"mousemove\", @updateSparkPosition\n    @canvas.addEventListener \"mouseup\", @endSparks\n    @canvas.addEventListener \"touchstart\", @startSparks\n    @canvas.addEventListener \"touchmove\", @updateSparkPosition\n    @canvas.addEventListener \"touchend\", @endSparks\n\n  # wipe the canvas and reset the animation state\n  reset: ->\n    @canvas.height = @height = @canvas.offsetHeight\n    @canvas.width = @width = @canvas.offsetWidth\n    @ctx.beginPath()\n    @ctx.rect 0, 0, @canvas.width, @canvas.height\n    @ctx.closePath()\n    @ctx.fillStyle = BACKGROUND_COLOR\n    @ctx.fill()\n    @sparks = []\n\n  # main rendering function executed every frame\n  draw: (timestamp) =>\n    unless @height == @canvas.offsetHeight and @width == @canvas.offsetWidth\n      @reset()\n\n    if @releaseSparksAt\n      for i in [0..10]\n        @sparks.push(\n          new Spark(\n            @releaseSparksAt.clone(),\n            new Point(Math.random()*2-1, Math.random()*2-1),\n            randomColor()))\n\n    i = 0\n    while i < @sparks.length\n      unless @sparks[i].finished\n        @sparks[i].update(@ctx)\n      else finishedUpTo = i  if finishedUpTo is i - 1\n      i++\n    @sparks.splice 0, finishedUpTo + 1  unless finishedUpTo is -1\n\n    if @logPerformance\n      @frameCount = (@frameCount || 0) + 1\n      if Math.floor(timestamp / 1000) != Math.floor(@prevLogTimestamp / 1000)\n        fps = Math.round((@frameCount - @prevFrameCount) / (timestamp - @prevLogTimestamp) * 1000)\n        console.log \"fps= #{fps}\"\n        @prevLogTimestamp = timestamp\n        @prevFrameCount = @frameCount\n\n    window.requestAnimationFrame @draw\n    return\n\n\n  startSparks: (event) =>\n    @releaseSparksAt = new Point()\n    @updateSparkPosition(event)\n\n  updateSparkPosition: (event) =>\n    if @releaseSparksAt\n      @releaseSparksAt.x = event.offsetX || event.layerX\n      @releaseSparksAt.y = event.offsetY || event.layerY\n\n  endSparks: (event) =>\n    @releaseSparksAt = null\n\n\n\n\n\n# A single dot on a ColorSparks canvas\nclass Spark\n\n  # Create a point with location and velocity Points\n  # and a color style\n  constructor: (@location, @velocity, @color) ->\n    @initialLocation = @location.clone()\n    @forceCounter = 0\n    @finished = false\n\n    @radius = INITIAL_DIAMETER.get() / 2\n    @radiusDecay = RADIUS_DECAY.get()\n    @darkeningRadius = DARKENING_DIAMETER.get() / 2\n    @xForceAmplitude = FORCE_AMPLITUDE.get()\n    @xForcePeriod = FORCE_PERIOD.get()\n    @yForceAmplitude = FORCE_AMPLITUDE.get()\n    @yForcePeriod = FORCE_PERIOD.get()\n\n  update: (ctx) ->\n    ctx.beginPath()\n    ctx.arc @location.x, @location.y, @radius, 0, Math.PI * 2, false\n    ctx.closePath()\n    ctx.fillStyle = @color\n    ctx.fill()\n    @forceCounter++\n    @velocity.x += Math.sin(Math.PI * 2 * @forceCounter / @xForcePeriod) * @xForceAmplitude\n    @velocity.y += Math.sin(Math.PI * 2 * @forceCounter / @yForcePeriod) * @yForceAmplitude\n    if @isText\n      ctx.beginPath()\n      ctx.arc @initialLocation.x + random(-1, 1), @initialLocation.y + random(-1, 1), @darkeningRadius, 0, Math.PI * 2, false\n      ctx.closePath()\n      ctx.fillStyle = \"rgba(0, 0, 0, \" + DARKENING_ALPHA + \")\"\n      ctx.fill()\n    @finished = true  if @radius < 1\n    @location.x += @velocity.x\n    @location.y += @velocity.y\n    @radius *= @radiusDecay\n    return\n\n\n# Generate a random number between from and to\nrandom = (from, to) ->\n  from + (Math.random() * (to - from))\n\n\n# Create a random fully saturated color. Colors are fully\n# saturated if they have one RGB value at 255, one at 0, and\n# the third at some  arbitrary value.\nrandomColor = ->\n  parts = [\n    255\n    Math.floor(random(0, 255))\n    0\n  ]\n  parts[1] = \"0\" + parts[1]  if parts[1].length is 1\n  from = 0\n\n  while from < parts.length\n    to = Math.floor(random(0, parts.length))\n    tmp = parts[from]\n    parts[from] = parts[to]\n    parts[to] = tmp\n    from++\n  \"rgba(\" + parts[0] + \",\" + parts[1] + \",\" + parts[2] + \",\" + TRANSPARENCY + \")\"\n\n# Create a random fully desaturated color, i.e. one in which\n# R, G and B values are all the same\nrandomGrey = ->\n  shade = Math.floor(GREY_VALUE.get())\n  \"rgba(\" + shade + \",\" + shade + \",\" + shade + \",\" + TRANSPARENCY + \")\"\n\n\n\nclass Point\n  constructor: (@x, @y) ->\n\n  clone: -> new Point(@x, @y)\n","# http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n# http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n\n# requestAnimationFrame polyfill by Erik Möller. fixes from Paul Irish and Tino Zijdel\n\n# MIT license\n(->\n  lastTime = 0\n  vendors = [\n    \"ms\"\n    \"moz\"\n    \"webkit\"\n    \"o\"\n  ]\n  x = 0\n\n  while x < vendors.length and not window.requestAnimationFrame\n    window.requestAnimationFrame = window[vendors[x] + \"RequestAnimationFrame\"]\n    window.cancelAnimationFrame = window[vendors[x] + \"CancelAnimationFrame\"] or window[vendors[x] + \"CancelRequestAnimationFrame\"]\n    ++x\n  unless window.requestAnimationFrame\n    window.requestAnimationFrame = (callback, element) ->\n      currTime = new Date().getTime()\n      timeToCall = Math.max(0, 16 - (currTime - lastTime))\n      id = window.setTimeout(->\n        callback currTime + timeToCall\n        return\n      , timeToCall)\n      lastTime = currTime + timeToCall\n      id\n  unless window.cancelAnimationFrame\n    window.cancelAnimationFrame = (id) ->\n      clearTimeout id\n      return\n  return\n)()\n"]}